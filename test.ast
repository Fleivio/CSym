Def_Type "B" (Ty_Prod Ty_U Ty_U)
Def_Term "q1" (Ty_Var "B") (T_Inl T_Unit)
Def_Term "q0" (Ty_Var "B") (T_Inr T_Unit)
Def_Iso "not"
        (IT_Iso (Ty_Var "B") (Ty_Var "B"))
        (I_Set [(V_Var "q0", E_Value (V_Var "q1")),
                (V_Var "q1", E_Value (V_Var "q0"))])
Def_Iso "cnot"
        (IT_Iso (Ty_Prod (Ty_Var "B") (Ty_Var "B"))
                (Ty_Prod (Ty_Var "B") (Ty_Var "B")))
        (I_Lam "a" (I_Name "a"))
Def_Iso "controlled"
        (IT_Func (IT_Iso (Ty_Var "B") (Ty_Var "B"))
                 (IT_Iso (Ty_Prod (Ty_Var "B") (Ty_Var "B"))
                         (Ty_Prod (Ty_Var "B") (Ty_Var "B"))))
        (I_Lam "f"
               (I_Set [(V_Pair (V_Var "q0") (V_Var "a"),
                        E_Value (V_Pair (V_Var "q0") (V_Var "a"))),
                       (V_Pair (V_Var "q1") (V_Var "a"),
                        E_Assign (P_Var "m")
                                 (I_Name "f")
                                 (P_Var "a")
                                 (E_Value (V_Pair (V_Var "q1") (V_Var "m"))))]))
Def_Iso "cnotn"
        (IT_Iso (Ty_Prod (Ty_List (Ty_Var "B")) (Ty_Var "B"))
                (Ty_Prod (Ty_List (Ty_Var "B")) (Ty_Var "B")))
        (I_Mu "f"
              (I_Set [(V_Pair V_List_Empty (V_Var "tb"),
                       E_Assign (P_Var "tb'")
                                (I_Name "not")
                                (P_Var "tb")
                                (E_Value (V_Pair V_List_Empty (V_Var "tb'")))),
                      (V_Pair (V_List_Cons (V_Var "q0") (V_Var "cbs"))
                              (V_Var "tb"),
                       E_Value (V_Pair (V_List_Cons (V_Var "q0")
                                                    (V_Var "cbs"))
                                       (V_Var "tb"))),
                      (V_Pair (V_List_Cons (V_Var "q1") (V_Var "cbs"))
                              (V_Var "tb"),
                       E_Assign (P_Pair (P_Var "cbs'") (P_Var "tb'"))
                                (I_Name "f")
                                (P_Pair (P_Var "cbs") (P_Var "tb"))
                                (E_Value (V_Pair (V_List_Cons (V_Var "q1")
                                                              (V_Var "cbs'"))
                                                 (V_Var "tb'"))))]))
Def_Iso "controlledn"
        (IT_Func (IT_Iso (Ty_Var "B") (Ty_Var "B"))
                 (IT_Iso (Ty_Prod (Ty_List (Ty_Var "B")) (Ty_Var "B"))
                         (Ty_Prod (Ty_List (Ty_Var "B"))
                                  (Ty_List (Ty_Var "B")))))
        (I_Mu "f"
              (I_Lam "op"
                     (I_Set [(V_Pair V_List_Empty (V_Var "tb"),
                              E_Assign (P_Var "tb'")
                                       (I_Name "op")
                                       (P_Var "tb")
                                       (E_Value (V_Pair V_List_Empty
                                                        (V_Var "tb'")))),
                             (V_Pair (V_List_Cons (V_Var "q0")
                                                  (V_List_Cons (V_Var "q0")
                                                               (V_Var "cbs")))
                                     (V_Var "tb"),
                              E_Value (V_Pair (V_List_Cons (V_Var "q0")
                                                           (V_Var "cbs"))
                                              (V_Var "tb"))),
                             (V_Pair (V_List_Cons (V_Var "q1") (V_Var "cbs"))
                                     (V_Var "tb"),
                              E_Assign (P_Pair (P_Var "cbs'") (P_Var "tb'"))
                                       (I_Name "f")
                                       (P_Pair (P_Var "cbs") (P_Var "tb"))
                                       (E_Value (V_Pair (V_List_Cons (V_Var "q1")
                                                                     (V_Var "cbs'"))
                                                        (V_Var "tb'"))))])))
